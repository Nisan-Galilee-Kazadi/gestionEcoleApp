<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard Admin - Gestion des Élèves</title>
  <!-- FontAwesome pour les icônes -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <!-- Favicon -->
  <link rel="icon" href="../public/images/logocicaf.png" alt="logo" type="image/png">
  <!-- Votre CSS global -->
  <link rel="stylesheet" href="../style.css">
  <!-- DataTables CSS -->
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
  <style>
    /* ============================
       Styles généraux pour le layout
    ============================ */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f6f9;
      color: #444;
    }
    a {
      text-decoration: none;
      color: inherit;
    }
    /* Wrapper en flex pour disposer la sidebar et le contenu */
    .wrapper {
      display: flex;
      min-height: 100vh;
    }
    /* ============================
       HEADER (Topbar)
    ============================ */
    header.topbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: #b88f1e;
      padding: 20px 20px;
      color: #fff;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
    }
    .topbar .navBar {
      display: flex;
      width: 100%;
      justify-content: space-between;
      align-items: center;
    }
    .topbar .top-left,
    .topbar .top-right {
      display: flex;
      align-items: center;
    }
    .top-right i {
      color: white;
    }
    .top-right i:hover {
      color: #101041;
    }
    .admin-menu li span {
      color: white;
    }
    .admin-menu li span:hover {
      color: #b88f1e;
    }
    .menu-item:hover span {
      color: #b88f1e;
      font-weight: 500;
      font-size: 14px;
    }
    .menu-item i {
      color: white;
    }
    .menu-item:hover i {
      color: #b88f1e;
    }
    .topbar .toggle-btn {
      font-size: 1.5rem;
      cursor: pointer;
      margin-right: 20px;
      color: #101041;
    }
    .topbar-logo-img {
      height: 40px;
      margin-right: 20px;
    }
    .topbar-search {
      position: relative;
    }
    .topbar-search input[type="search"] {
      padding: 15px 35px 10px 10px;
      border: none;
      border-radius: 5px;
      font-size: 11px;
    }
    .modal-content {
      background: #fff;
      padding: 20px;
      border-radius: 5px;
      max-width: 750px;
      font-size:14px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }
    .modal-content h1.section-title {
      color: #101041;
      font-size: 1.5rem;
      margin-bottom: 20px;
    }
    .modal-content .form-group {
      margin-bottom: 15px;
    }
    .modal-content .form-group label {
      display: block;
      margin-bottom: 5px;
      color: #444;
    }
    .modal-content .form-group input,
    .modal-content .form-group select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 3px;
      font-size: 1rem;
    }
    .modal-content .form-group input:focus,
    .modal-content .form-group select:focus {
      border-color: #b88f1e;
      outline: none;
    }
    .modal-content button[type="submit"] {
      background-color: #b88f1e;
      color: #fff;
      border: none;
      padding: 10px 20px;
      cursor: pointer;
      border-radius: 3px;
      font-size: 1rem;
    }
    .modal-content button[type="submit"]:hover {
      opacity: 0.9;
    }
    .topbar-search input[type="search"] {
      padding: 10px 35px 10px 10px;
      border: none;
      border-radius: 5px;
      font-size: 12px;
    }
    .topbar-search input[type="search"]::placeholder {
      color: #888;
      font-style: italic;
      font-size: 12px;
    }
    .topbar-search button {
      position: absolute;
      top: 50%;
      right: 5px;
      transform: translateY(-50%);
      background: none;
      border: none;
      cursor: pointer;
      color: #101041;
    }
    .topbar button {
      background: none;
      border: none;
      cursor: pointer;
      margin-left: 15px;
      color: #fff;
      font-size: 1.5rem;
    }
    .topbar-profile img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
    }

        .top-right #fullscreenBtn {
      background: none;
      border: none;
      cursor: pointer;
      padding: 5px;
      margin-left: 10px;
    }

    .top-right #fullscreenBtn i {
      color: white;
      font-size: 18px;
    }

    .top-right #fullscreenBtn:hover i {
      color: #101041;
    }
    /* ============================
       SIDEBAR
    ============================ */
    aside.sidebar {
      background-color: #101041;
      overflow: hidden;
      transition: width 0.3s;
      width: 70px;
      height: 100vh;
      z-index: 900;
      position: fixed;
    }
    aside.sidebar.expanded {
      width: 190px;
    }
    .menuContent {
      padding-top: 60px;
    }
    .menuContent .logo {
      text-align: center;
      margin-bottom: 20px;
    }
    .menuContent .logo img {
      max-width: 80%;
    }
    .app-menu {
      overflow-y: auto;
    }
    .admin-menu {
      list-style: none;
      padding: 0;
      margin: 0;
      padding-top: 20px;
    }
    .admin-menu li {
      padding: 15px;
      display: flex;
      align-items: center;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .admin-menu li:hover {
      background-color: #1e282c;
    }
    .admin-menu li i {
      margin-right: 10px;
      font-size: 30px;
    }
    aside.sidebar.collapsed .admin-menu li span {
      display: none;
    }
    /* ============================
       PAGE CONTENT & MAIN
    ============================ */
    .page-content {
      flex-grow: 1;
      transition: margin-left 0.3s;
      padding-top: 60px;
      background-color: #f4f6f9;
      margin-left: 70px;
    }
    @media (min-width: 768px) {
      aside.sidebar.expanded + .page-content {
        margin-left: 190px;
      }
    }
    main {
      padding: 20px;
    }
    .dashboard-header h2 {
      font-size: 2rem;
      margin-bottom: 5px;
      color: #101041;
    }
    .dashboard-header p {
      color: #666;
      margin-bottom: 20px;
    }
    .stats {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }
    .stat-box {
      flex: 1 1 200px;
      background: #fff;
      padding: 20px;
      border-radius: 5px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      text-align: center;
    }
    .stat-box h3 {
      margin-bottom: 10px;
      font-size: 1.2rem;
      color: #101041;
    }
    .stat-box p {
      font-size: 2rem;
      color: #b88f1e;
    }
    /* ============================
       FOOTER
    ============================ */
    footer.footer {
      background-color: #fff;
      padding: 15px 20px;
      text-align: center;
      border-top: 1px solid #ddd;
      margin-top: 20px;
    }
    /* ============================
       Formulaire modal pour inscription
    ============================ */
    .modal {
      display: none;
      position: fixed;
      z-index: 2000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background: rgba(0,0,0,0.5);
      align-items: center;
      justify-content: center;
    }
    .modal.active {
      display: flex;
    }
    .modal-close {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 1.5rem;
      cursor: pointer;
    }
    .blur {
      filter: blur(4px);
    }
    table.dataTable thead {
      background-color: #101041;
      color: #fff;
    }
    .dataTables_filter {
      display: none;
    }
    table.dataTable {
      border-collapse: collapse;
    }
    table.dataTable th,
    table.dataTable td {
      border: 1px solid #ddd;
      padding: 8px;
    }
    .btn-view,
    .btn-edit,
    .btn-delete {
      padding: 5px 10px;
      margin: 0 2px;
      border: none;
      border-radius: 3px;
      cursor: pointer;
      color: #fff;
    }
    .btn-view { background-color: #5bc0de; }
    .btn-edit { background-color: #f0ad4e; }
    .btn-delete { background-color: #d9534f; }
    .btn-ajouter {
      background-color: #b88f1e;
      color: #fff;
      border: none;
      padding: 10px 20px;
      margin-bottom: 20px;
      cursor: pointer;
      border-radius: 5px;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 12px;
    }
    .btn-ajouter i{
      color: #fff;
      border: solid 1px #fff;
      padding: 4px 4px;
      cursor: pointer;
      border-radius: 100%;
    }
    .btn-ajouter:hover {
      opacity: 0.9;
      background-color: #101041;
      border-radius: 20px;
    }
    *{
      outline:none;
    }

    .info-eleve .form-group{
      display: flex;
      justify-content: space-between;
      gap: 10px;
      
    }

    .info-eleve .form-group label{
      font-weight: 800;
    }

    .sidebar-bottom {
    position: fixed;
    bottom: 0;
    width: 70px; /* même largeur que la sidebar réduite */
    background-color: #101041;
    padding: 10px 0;
    transition: width 0.3s;
  }

  .sidebar.expanded .sidebar-bottom {
    width: 190px; /* même largeur que la sidebar étendue */
  }

  .sidebar-bottom .admin-menu li {
    padding: 10px 20px;
  }

  .sidebar-bottom .admin-menu li:last-child {
    border-top: 1px solid rgba(255, 255, 255, 0.1);
  }
  </style>
</head>
<body>
  <!-- Modal pour inscription d'élève -->
  <div id="modalForm" class="modal">
    <div class="modal-content">
      <span class="modal-close">&times;</span>
      <form id="inscriptionForm">
        <div class="form-container">
            <!-- Titre et Champs Tuteur -->
            <h1 class="section-title">Info sur le tuteur</h1>
            <div class="form-group">
                <label for="nom_tuteur">Nom du tuteur</label>
                <input type="text" id="nom_tuteur" name="nom_tuteur" required>
            </div>
            <div class="form-group">
                <label for="prenom_tuteur">Prénom du tuteur</label>
                <input type="text" id="prenom_tuteur" name="prenom_tuteur" required>
            </div>
            <div class="form-group">
                <label for="telephone_tuteur">N° de téléphone du tuteur</label>
                <input type="tel" id="telephone_tuteur" name="telephone_tuteur" required>
            </div>
            <div class="form-group">
                <label for="email_tuteur">Adresse e-mail du tuteur</label>
                <input type="email" id="email_tuteur" name="email_tuteur" required>
            </div>
            <div class="form-group">
                <label for="lien_eleve">Lien avec l'élève</label>
                <select id="lien_eleve" name="lien_eleve" required>
                    <option value="parent">Parent</option>
                    <option value="oncle">Oncle</option>
                    <option value="tante">Tante</option>
                    <option value="grand_parent">Grand-parent</option>
                    <option value="autre">Autre</option>
                </select>
            </div>
            <div class="form-group">
                <label for="adresse_tuteur">Adresse physique du tuteur</label>
                <input type="text" id="adresse_tuteur" name="adresse_tuteur" required placeholder="Ex: 233 Masoso / Limete / Kinshasa">
            </div>
        </div>
        <hr style="color:#101041;">
        <div class="form-container">
            <!-- Titre et Informations de l'élève -->
            <h1 class="section-title">Info sur l'élève</h1>
            <div class="form-group">
                <label for="nom">Nom</label>
                <input type="text" id="nom" name="nom" required>
            </div>
            <div class="form-group">
                <label for="prenom">Prénom</label>
                <input type="text" id="prenom" name="prenom" required>
            </div>
            <div class="form-group">
                <label for="postnom">Post-nom</label>
                <input type="text" id="postnom" name="postnom">
            </div>
            <div class="form-group">
                <label for="sexe">Sexe</label>
                <select id="sexe" name="sexe" required>
                    <option value="masculin">Masculin</option>
                    <option value="feminin">Féminin</option>
                </select>
            </div>
            <div class="form-group">
                <label for="nationalite">Nationalité</label>
                <select id="nationalite" name="nationalite">
                    <option value="congolaise">Congolaise</option>
                    <option value="francaise">Française</option>
                    <option value="belge">Belge</option>
                    <option value="canadienne">Canadienne</option>
                    <option value="americaine">Américaine</option>
                </select>
            </div>
            <div class="form-group">
                <label for="date_naissance">Date de naissance</label>
                <input type="date" id="date_naissance" name="date_naissance" required>
            </div>
            <div class="form-group">
                <label for="telephone">Numéro de téléphone</label>
                <input type="tel" id="telephone" name="telephone" required>
            </div>
            <div class="form-group">
                <label for="email_eleve">Adresse e-mail de l'élève</label>
                <input type="email" id="email_eleve" name="email_eleve" required>
            </div>
            <div class="form-group">
                <label for="niveau_etude">Niveau d'étude</label>
                <select id="niveau_etude" name="niveau_etude">
                    <option value="1ere_annee">1ère année</option>
                    <option value="2eme_annee">2ème année</option>
                    <option value="3eme_annee">3ème année</option>
                    <option value="4eme_annee">4ème année</option>
                    <option value="5eme_annee">5ème année</option>
                    <option value="6eme_annee">6ème année</option>
                </select>
            </div>
            <div class="form-group">
                <label for="section">Section</label>
                <select id="section" name="section" onchange="toggleOptions()">
                    <option value="primaire">Primaire</option>
                    <option value="secondaire">Secondaire</option>
                    <option value="humanite">Humanité</option>
                </select>
            </div>
            <div class="form-group hidden" id="option_humanite">
                <label for="option_humanite_select">Option</label>
                <select id="option_humanite_select" name="option_humanite">
                    <option value="commercial_gestion">Commercial & Gestion</option>
                    <option value="couture">Couture</option>
                    <option value="mecanique">Mécanique</option>
                    <option value="hotellerie">Hôtellerie</option>
                    <option value="electricite">Électricité</option>
                </select>
            </div>
        </div>
        <hr class="hr" style="color:#101041;">
            <div class="form-container">
                <!-- Titre et Informations de l'ancienne ecole -->
                <h1 class="section-title">Info sur l'ecole de Provenance</h1>
                <div class="form-group">
                    <label for="nom">Denomination de l'école</label>
                    <input type="text" id="denomination_ecole" name="denomination_ecole" required>
                </div>
                <div class="form-group">
                    <label for="prenom">situation Geographique</label>
                    <input type="text" id="adresse_ecole" name="adresse_ecole" required placeholder="Ex: 233 Masoso / Limete / Kinshasa">
                </div>
                
                
                <div class="form-group">
                    <label for="telephone">Numéro de Contact</label>
                    <input type="tel" id="contact_ecole" name="contact_ecole" required>
                </div>
                <div class="form-group">
                    <label for="email_eleve">Adresse e-mail de l'ecole</label>
                    <input type="email" id="email_ecole" name="email_ecole" required>
                </div>
            
            </div>
        <button type="submit">Ajouter l'élève</button>
      </form>
    </div>
  </div>
  
  <!-- Modal pour visualiser les détails d'un élève -->
  <div id="viewEleveModal" class="modal">
    <div class="modal-content" style=" width:700px;top: 100px ; margin: auto; background-color: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);">
      <span class="modal-close" id="closeViewModal" style="color: #b88f1e; font-size: 1.5rem; cursor: pointer; margin-top: 15px; right: 30px; border-radius: 100%; border: solid 1px #b88f1e; padding: 1px 4px;">&times;</span>
    <div class="info-eleve" style="display: flex; justify-content: space-around; gap: 50px ; padding: 20px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);">
        <div class="left">
          <h1 class="section-title" style="color: #101041; font-size: 1.5rem; margin-bottom: 20px;">Détails de l'élève</h1>
          <div class="form-group">
            <label>Nom:</label>
            <p id="viewEleveNom"></p>
          </div>
          <div class="form-group">
            <label>Prénom:</label>
            <p id="viewElevePrenom"></p>
          </div>
          <div class="form-group">
            <label>Post-nom:</label>
            <p id="viewElevePostnom"></p>
          </div>
          <div class="form-group">
            <label>Sexe:</label>
            <p id="viewEleveSexe"></p>
          </div>
          <div class="form-group">
            <label>Nationalité:</label>
            <p id="viewEleveNationalite"></p>
          </div>
          <div class="form-group">
            <label>Date de naissance:</label>
            <p id="viewEleveDateNaissance"></p>
          </div>
          <div class="form-group">
            <label>Téléphone:</label>
            <p id="viewEleveTelephone"></p>
          </div>
          <div class="form-group">
            <label>Email:</label>
            <p id="viewEleveEmail"></p>
          </div>
          <div class="form-group">
            <label>Niveau d'étude:</label>
            <p id="viewEleveNiveauEtude"></p>
          </div>
          <div class="form-group">
            <label>Section:</label>
            <p id="viewEleveSection"></p>
          </div>
          <div class="form-group">
            <label>Option:</label>
            <p id="viewEleveOption"></p>
          </div>
        </div>
        <div class="right" >
            <h1 class="section-title" style="color: #101041; font-size: 1.5rem; margin-top: 0px;">Détails du tuteur</h1>
            <div class="form-group">
              <label>Nom:</label>
              <p id="viewTuteurNom"></p>
            </div>
            <div class="form-group">
              <label>Prénom:</label>
              <p id="viewTuteurPrenom"></p>
            </div>
            <div class="form-group">
              <label>Téléphone:</label>
              <p id="viewTuteurTelephone"></p>
            </div>
            <div class="form-group">
              <label>Email:</label>
              <p id="viewTuteurEmail"></p>
            </div>
            <div class="form-group">
              <label>Lien avec l'élève:</label>
              <p id="viewTuteurLien"></p>
            </div>
            <div class="form-group">
              <label>Adresse:</label>
              <p id="viewTuteurAdresse"></p>
            </div>
        </div>
    </div> 
      <button id="closeViewBtn" style="background-color: #b88f1e; color: #fff; border: none; padding: 10px 20px; cursor: pointer; border-radius: 5px; font-size: 1rem; margin-top: 20px; margin-left: 280px;">Fermer</button>
    </div>
  </div>

  <!-- Modal pour modification d'élève -->
  <div id="editModalForm" class="modal">
    <div class="modal-content">
      <span class="modal-close">&times;</span>
      <form id="editForm">
        <div class="form-container">
          <!-- Titre et Champs Tuteur -->
          <h1 class="section-title">Modifier les infos du tuteur</h1>
          <div class="form-group">
            <label for="edit_nom_tuteur">Nom du tuteur</label>
            <input type="text" id="edit_nom_tuteur" name="nom_tuteur" required>
          </div>
          <div class="form-group">
            <label for="edit_prenom_tuteur">Prénom du tuteur</label>
            <input type="text" id="edit_prenom_tuteur" name="prenom_tuteur" required>
          </div>
          <div class="form-group">
            <label for="edit_telephone_tuteur">N° de téléphone du tuteur</label>
            <input type="tel" id="edit_telephone_tuteur" name="telephone_tuteur" required>
          </div>
          <div class="form-group">
            <label for="edit_email_tuteur">Adresse e-mail du tuteur</label>
            <input type="email" id="edit_email_tuteur" name="email_tuteur" required >
          </div>
          <div class="form-group">
            <label for="edit_lien_eleve">Lien avec l'élève</label>
            <select id="edit_lien_eleve" name="lien_eleve" required>
              <option value="parent">Parent</option>
              <option value="oncle">Oncle</option>
              <option value="tante">Tante</option>
              <option value="grand_parent">Grand-parent</option>
              <option value="autre">Autre</option>
            </select>
          </div>
          <div class="form-group">
            <label for="edit_adresse_tuteur">Adresse physique du tuteur</label>
            <input type="text" id="edit_adresse_tuteur" name="adresse_tuteur" required placeholder="Ex: 233 Masoso / Limete / Kinshasa">
          </div>
        </div>
        <hr style="color:#101041;">
        <div class="form-container">
          <!-- Titre et Informations de l'élève -->
          <h1 class="section-title">Modifier les infos de l'élève</h1>
          <div class="form-group">
            <label for="edit_nom">Nom</label>
            <input type="text" id="edit_nom" name="nom" required>
          </div>
          <div class="form-group">
            <label for="edit_prenom">Prénom</label>
            <input type="text" id="edit_prenom" name="prenom" required>
          </div>
          <div class="form-group">
            <label for="edit_postnom">Post-nom</label>
            <input type="text" id="edit_postnom" name="postnom">
          </div>
          <div class="form-group">
            <label for="edit_sexe">Sexe</label>
            <select id="edit_sexe" name="sexe" required>
              <option value="masculin">Masculin</option>
              <option value="feminin">Féminin</option>
            </select>
          </div>
          <div class="form-group">
            <label for="edit_nationalite">Nationalité</label>
            <select id="edit_nationalite" name="nationalite">
              <option value="congolaise">Congolaise</option>
              <option value="francaise">Française</option>
              <option value="belge">Belge</option>
              <option value="canadienne">Canadienne</option>
              <option value="americaine">Américaine</option>
            </select>
          </div>
          <div class="form-group">
            <label for="edit_date_naissance">Date de naissance</label>
            <input type="date" id="edit_date_naissance" name="date_naissance" required >
          </div>
          <div class="form-group">
            <label for="edit_telephone">Numéro de téléphone</label>
            <input type="tel" id="edit_telephone" name="telephone" required>
          </div>
          <div class="form-group">
            <label for="edit_email_eleve">Adresse e-mail de l'élève</label>
            <input type="email" id="edit_email_eleve" name="email_eleve" required>
          </div>
          <div class="form-group">
            <label for="edit_niveau_etude">Niveau d'étude</label>
            <select id="edit_niveau_etude" name="niveau_etude">
              <option value="1ere_annee">1ère année</option>
              <option value="2eme_annee">2ème année</option>
              <option value="3eme_annee">3ème année</option>
              <option value="4eme_annee">4ème année</option>
              <option value="5eme_annee">5ème année</option>
              <option value="6eme_annee">6ème année</option>
            </select>
          </div>
          <div class="form-group">
            <label for="edit_section">Section</label>
            <select id="edit_section" name="section" onchange="toggleEditOptions()">
              <option value="primaire">Primaire</option>
              <option value="secondaire">Secondaire</option>
              <option value="humanite">Humanité</option>
            </select>
          </div>
          <div class="form-group hidden" id="edit_option_humanite">
            <label for="edit_option_humanite_select">Option</label>
            <select id="edit_option_humanite_select" name="option_humanite">
              <option value="commercial_gestion">Commercial & Gestion</option>
              <option value="couture">Couture</option>
              <option value="mecanique">Mécanique</option>
              <option value="hotellerie">Hôtellerie</option>
              <option value="electricite">Électricité</option>
            </select>
          </div>
        </div>
        <hr class="hr" style="color:#101041;">
            <div class="form-container">
                <!-- Titre et Informations de l'ancienne ecole -->
                <h1 class="section-title">Info sur l'ecole de Provenance</h1>
                <div class="form-group">
                    <label for="nom">Denomination de l'école</label>
                    <input type="text" id="denomination_ecole" name="denomination_ecole" required>
                </div>
                <div class="form-group">
                    <label for="prenom">situation Geographique</label>
                    <input type="text" id="adresse_ecole" name="adresse_ecole" required placeholder="Ex: 233 Masoso / Limete / Kinshasa">
                </div>
                
                
                <div class="form-group">
                    <label for="telephone">Numéro de Contact</label>
                    <input type="tel" id="contact_ecole" name="contact_ecole" required>
                </div>
                <div class="form-group">
                    <label for="email_eleve">Adresse e-mail de l'ecole</label>
                    <input type="email" id="email_ecole" name="email_ecole" required>
                </div>
            
            </div>
        <button type="submit">Enregistrer</button>
      </form>
    </div>
  </div>
  
  <section class="dashboardSection">
    <div class="wrapper">
      <!-- SIDEBAR -->
      <aside class="sidebar collapsed" id="sidebar">
        <div class="menuContent">
          <div class="app-menu" data-simplebar>
            <ul class="admin-menu">
              <li class="menu-item" onclick="location.href='./dashIndex.html'">
                <i class="fas fa-home fa-2x"></i>
                <span>Dashboard</span>
              </li>
              <li class="menu-item" onclick="location.href='gestionEleves.html'">
                <i class="fas fa-user-graduate fa-2x" style="color: #b88f1e;"> </i>
                <span style="color: #b88f1e;">Élèves</span>
              </li>
              <li class="menu-item" onclick="location.href='gestionEnseignants.html'">
                <i class="fas fa-chalkboard-teacher fa-2x"></i>
                <span>Enseignants</span>
              </li>
              <li class="menu-item" onclick="location.href='paiements.html'">
                <i class="fas fa-dollar-sign fa-2x"></i>
                <span>Paiements</span>
              </li>
              <li class="menu-item" onclick="location.href='rapports.html'">
                <i class="fas fa-chart-line fa-2x"></i>
                <span >Rapports</span>
              </li>
              <li class="menu-item" onclick="location.href='gestionInsertion.html'">
                <i class="fas fa-edit fa-2x"></i>
                <span>Inscriptions</span>
              </li>
              <li class="menu-item" onclick="location.href='cartes.html'">
                <i class="fas far fa-id-card fa-2x"></i>
                <span>cartes</span>
              </li>
            </ul>
          </div>
        </div>
        
      <!-- Ajout des icônes en bas -->
      <div class="sidebar-bottom">
        <ul class="admin-menu">
          <li class="menu-item" >
            <a href="parametres.html" style="display: flex;
          align-items: center;">
              <i class="fas fa-cog"></i>
              <span>Paramètres</span>
            </a>
          </li>
          <li class="menu-item">
            <a href="#" id="logoutBtn" style="display: flex;
          align-items: center;">
              <i class="fas fa-sign-out-alt"></i>
              <span>Déconnexion</span>
            </a>
          </li>
        </ul>
      </div>
      </aside>
      <!-- PAGE CONTENT -->
      <div class="page-content">
        <!-- TOPBAR -->
        <header class="topbar">
          <div class="navBar">
            <div class="top-left">
              <button class="toggle-btn" id="toggleBtn" title="Ouvrir / Fermer le menu">
                <i class="fas fa-bars"></i>
              </button>
              <a href="#" class="topbar-logo">
                <!-- Remplacez "logo.png" par votre logo -->
              </a>
              <div class="topbar-search">
                <input type="search" id="headerSearch" placeholder="recherche automatique...">
              </div>
            </div>
            <div class="top-right">
              <button id="fullscreenBtn" title="Plein écran">
                <i class="fas fa-expand"></i>
              </button>
              <button title="Changer de langue">
                <i class="fas fa-globe"></i>
              </button>
              <button title="Notifications">
                <i class="fas fa-bell"></i>
              </button>
              <div class="topbar-profile">
                <button title="Profil">
                  <img src="https://via.placeholder.com/40" alt="Profile">
                </button>
              </div>
            </div>
          </div>
        </header>
        <!-- MAIN CONTENT -->
        <main id="mainContent">
          <div class="dashboard-header">
            <h2 style="margin-left: 20px;">Gestion des élèves</h2>
          </div>
          <div class="container" style="padding: 20px;">
            <button class="btn-ajouter" id="openModalBtn">
              <i class="fas fa-plus"></i> Ajouter Élève
            </button>
            <table id="elevesTable" class="display" style="width:100%">
              <thead>
              <tr>
                <th>Nom</th>
                <th>Prénom</th>
                <th>Date de naissance</th>
                <th>Email</th>
                <th>Téléphone</th>
                <th>Sexe</th>
                <th>Nationalité</th>
                <th>Niveau d'étude</th>
                <th>Section</th>
                <th>Option</th>
                <th>Actions</th>
              </tr>
              </thead>
              <tbody>
              </tbody>
            </table>
          </div>
        </main>
        <!-- FOOTER -->
        <footer class="footer">
          <div class="footer-content">
            <p>&copy; <script>document.write(new Date().getFullYear())</script> Nisan-Galilée Kazadi_Gestion d'école. Tout droit réservés</p>
          </div> 
        </footer>
      </div>
    </div>
  </section>
  
  <!-- SCRIPT pour le toggle de la sidebar -->
  <script>
    const toggleBtn = document.getElementById('toggleBtn');
    const sidebar = document.getElementById('sidebar');
    toggleBtn.addEventListener('click', () => {
      sidebar.classList.toggle('expanded');
      sidebar.classList.toggle('collapsed');
    });
  </script>
  
  <!-- SCRIPT pour la gestion des élèves avec DataTables et AJAX -->
  <script>
    var currentEditId = null; // variable globale pour stocker l'ID de l'élève en modification
    
    $(document).ready(function(){
      // Initialiser DataTable avec chargement AJAX
      var table = $('#elevesTable').DataTable({
        ajax: {
          url: 'http://localhost:5002/api/eleves',
          dataSrc: '',
          error: function(xhr, error, thrown) {
            console.error('Erreur lors du chargement des données:', xhr.responseText);
            alert('Erreur lors du chargement des données. Veuillez vérifier l\'URL de l\'API et le serveur.');
          }
        },
        ordering: false,
        columns: [
          { data: 'nom' },
          { data: 'prenom' },
          { 
            data: 'date_naissance',
            render: function(data) {
              return new Date(data).toLocaleDateString();
            }
          },
          { 
            data: 'email_eleve',
            defaultContent: '',
            render: function(data, type, row) {
              return data ? data : 'non_enregisté';
            }
          },
          { data: 'telephone' },
          { data: 'sexe' },
          { data: 'nationalite' },
          { data: 'niveau_etude' },
          { data: 'section' },
          { 
            data: 'option_humanite',
            defaultContent: '',
            render: function(data, type, row) {
              return data ? data : 'pas_necessaire';
            }
          },
          {
            data: '_id',
            render: function(data, type, row) {
              return '<button class="btn-view" data-id="'+ data +'" title="Voir"><i class="fas fa-eye"></i></button> ' +
                     '<button class="btn-edit" data-id="'+ data +'" title="Modifier"><i class="fas fa-edit"></i></button> ' +
                     '<button class="btn-delete" data-id="'+ data +'" title="Supprimer"><i class="fas fa-trash"></i></button>';
            }
          }
        ]
      });
      
      // Recherche personnalisée via l'input du header
      $('#headerSearch').on('keyup', function(){
        table.search(this.value).draw();
      });
      
      // Suppression d'un élève via AJAX
      $('#elevesTable tbody').on('click', '.btn-delete', function(){
        var id = $(this).data('id');
        if(confirm('Voulez-vous vraiment supprimer cet élève ?')){
          $.ajax({
            url: 'http://localhost:5002/api/eleves/' + id,
            type: 'DELETE',
            success: function(result){
              alert('Élève supprimé');
              table.ajax.reload();
            },
            error: function(xhr, status, error){
              console.error('Erreur lors de la suppression', error);
            }
          });
        }
      });
      
      // Édition d'un élève : récupérer les données et ouvrir le modal de modification
      $('#elevesTable tbody').on('click', '.btn-edit', function(){
        var id = $(this).data('id');
        currentEditId = id; // stocker l'ID pour le formulaire de modification
        $.ajax({
          url: 'http://localhost:5002/api/eleves/' + id,
          type: 'GET',
          success: function(data){
            // Remplir le formulaire de modification avec les données de l'élève
            $('#edit_nom').val(data.nom);
            $('#edit_prenom').val(data.prenom);
            $('#edit_postnom').val(data.postnom);
            $('#edit_sexe').val(data.sexe);
            $('#edit_nationalite').val(data.nationalite);
            $('#edit_date_naissance').val(new Date(data.date_naissance).toISOString().split('T')[0]);
            $('#edit_telephone').val(data.telephone);
            $('#edit_email_eleve').val(data.email_eleve);
            $('#edit_niveau_etude').val(data.niveau_etude);
            $('#edit_section').val(data.section);
            $('#edit_option_humanite_select').val(data.option_humanite);
            
            // Remplir le formulaire avec les données du tuteur
            $('#edit_nom_tuteur').val(data.nom_tuteur);
            $('#edit_prenom_tuteur').val(data.prenom_tuteur);
            $('#edit_telephone_tuteur').val(data.telephone_tuteur);
            $('#edit_email_tuteur').val(data.email_tuteur);
            $('#edit_lien_eleve').val(data.lien_eleve);
            $('#edit_adresse_tuteur').val(data.adresse_tuteur);
            
            // Afficher le modal avec les données remplies
            editModalForm.classList.add('active');
            mainContent.classList.add('blur');
          },
          error: function(xhr, status, error){
            console.error('Erreur lors de la récupération des données', error);
          }
        });
      });
      
      // Voir les détails d'un élève
      $('#elevesTable tbody').on('click', '.btn-view', function(){
        var id = $(this).data('id');
        $.ajax({
          url: 'http://localhost:5002/api/eleves/' + id,
          type: 'GET',
          success: function(data){
        // Remplir le modal avec les données de l'élève
        $('#viewEleveNom').text(data.nom);
        $('#viewElevePrenom').text(data.prenom);
        $('#viewElevePostnom').text(data.postnom);
        $('#viewEleveSexe').text(data.sexe);
        $('#viewEleveNationalite').text(data.nationalite);
        $('#viewEleveDateNaissance').text(new Date(data.date_naissance).toLocaleDateString());
        $('#viewEleveTelephone').text(data.telephone);
        $('#viewEleveEmail').text(data.email_eleve);
        $('#viewEleveNiveauEtude').text(data.niveau_etude);
        $('#viewEleveSection').text(data.section);
        $('#viewEleveOption').text(data.option_humanite ? data.option_humanite : 'pas_necessaire');
        
        // Remplir le modal avec les données du tuteur
        $('#viewTuteurNom').text(data.nom_tuteur);
        $('#viewTuteurPrenom').text(data.prenom_tuteur);
        $('#viewTuteurTelephone').text(data.telephone_tuteur);
        $('#viewTuteurEmail').text(data.email_tuteur);
        $('#viewTuteurLien').text(data.lien_eleve);
        $('#viewTuteurAdresse').text(data.adresse_tuteur);
        
        // Afficher le modal
        $('#viewEleveModal').show();
        $('body').addClass('modal-open');
          },
          error: function(xhr, status, error){
        console.error('Erreur lors de la récupération des données', error);
          }
        });
      });
      
      $('#closeViewBtn, #closeViewModal').on('click', function() {
        $('#viewEleveModal').hide();
        $('body').removeClass('modal-open');
      });
        });
  </script>
  
  <!-- SCRIPT pour gérer l'ouverture/fermeture des modaux et l'envoi des formulaires -->
  <script>
    const openModalBtn = document.getElementById('openModalBtn');
    const modalForm = document.getElementById('modalForm');
    const editModalForm = document.getElementById('editModalForm');
    const modalClose = document.querySelectorAll('.modal-close');
    const mainContent = document.getElementById('mainContent');
    
    openModalBtn.addEventListener('click', function(){
      modalForm.classList.add('active');
      mainContent.classList.add('blur');
    });

    modalClose.forEach(closeBtn => {
      closeBtn.addEventListener('click', function(){
        modalForm.classList.remove('active');
        editModalForm.classList.remove('active');
        mainContent.classList.remove('blur');
      });
    });

    // Fermer le modal en cliquant en dehors du contenu
    window.addEventListener('click', function(e) {
      if(e.target === modalForm || e.target === editModalForm) {
        modalForm.classList.remove('active');
        editModalForm.classList.remove('active');
        mainContent.classList.remove('blur');
      }
    });

    // Affichage/masquage des options supplémentaires pour la section "Humanité"
    function toggleOptions(){
      var section = document.getElementById('section').value;
      var optionHumanite = document.getElementById('option_humanite');
      if(section === 'humanite'){
        optionHumanite.classList.remove('hidden');
      } else {
        optionHumanite.classList.add('hidden');
      }
    }

    function toggleEditOptions(){
      var section = document.getElementById('edit_section').value;
      var optionHumanite = document.getElementById('edit_option_humanite');
      if(section === 'humanite'){
        optionHumanite.classList.remove('hidden');
      } else {
        optionHumanite.classList.add('hidden');
      }
    }

    // Soumission du formulaire d'inscription (ajout)
    document.getElementById('inscriptionForm').addEventListener('submit', function(event) {
      event.preventDefault();
      
      var formData = new FormData(event.target);
      var data = {};
      formData.forEach((value, key) => {
        data[key] = value;
      });

      if (data.section !== 'humanite') {
        delete data.option_humanite;
      }

      console.log("Données envoyées (ajout):", JSON.stringify(data));

      const apiUrl = 'http://localhost:5002/save';
      fetch(apiUrl, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
      })
      .then(response => {
        if (!response.ok) {
          throw new Error(`Erreur HTTP : ${response.status} - ${response.statusText}`);
        }
        return response.json();
      })
      .then(data => {
        console.log('✅ Succès (ajout):', data);
        modalForm.classList.remove('active');
        mainContent.classList.remove('blur');

        const successModal = document.createElement('div');
        successModal.classList.add('modal', 'active');
        successModal.innerHTML = `
          <div class="modal-content" style="background-color: #b88f1e; color: #101041; border-radius: 10px;">
            <span class="modal-close" style="color: #101041;">&times;</span>
            <div style="display: flex; align-items: center;">
              <i class="fas fa-check-circle" style="color: #101041; font-size: 2rem; margin-right: 10px;"></i>
              <p style="font-size:14px;"> Élève ajouté avec succès</p>
            </div>
          </div>
        `;
        document.body.appendChild(successModal);
        successModal.querySelector('.modal-close').addEventListener('click', function() {
          successModal.classList.remove('active');
          document.body.removeChild(successModal);
        });
        window.addEventListener('click', function(e) {
          if (e.target === successModal) {
            successModal.classList.remove('active');
            document.body.removeChild(successModal);
          }
        });
        $('#elevesTable').DataTable().ajax.reload();
      })
      .catch((error) => {
        console.error('❌ Erreur (ajout):', error);
        alert("Une erreur est survenue lors de l'envoi du formulaire : " + error.message);
      });
    });

    // Soumission du formulaire de modification
    document.getElementById('editForm').addEventListener('submit', function(event) {
      event.preventDefault();
      
      var formData = new FormData(event.target);
      var data = {};
      formData.forEach((value, key) => {
        data[key] = value;
      });

      // Utiliser l'ID stocké lors de l'ouverture du modal d'édition
      data.id = currentEditId;

      if (data.section !== 'humanite') {
        delete data.option_humanite;
      }

      console.log("Données envoyées (modification):", JSON.stringify(data));

        // Utilise la méthode PUT sur l'endpoint '/api/eleves/:id'
        const apiUrl = 'http://localhost:5002/api/eleves/' + currentEditId;
        fetch(apiUrl, {
          method: 'PUT',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        })

      .then(response => {
        if (!response.ok) {
          throw new Error(`Erreur HTTP : ${response.status} - ${response.statusText}`);
        }
        return response.json();
      })
      .then(data => {
        console.log('✅ Succès (modification):', data);
        editModalForm.classList.remove('active');
        mainContent.classList.remove('blur');

        const editSuccessModal = document.createElement('div');
        editSuccessModal.classList.add('modal', 'active');
        editSuccessModal.innerHTML = `
          <div class="modal-content" style="background-color: #b88f1e; color: #101041; border-radius: 10px;">
            <span class="modal-close" style="color: #101041;">&times;</span>
            <div style="display: flex; align-items: center;">
              <i class="fas fa-check-circle" style="color: #101041; font-size: 2rem; margin-right: 10px;"></i>
              <p style="font-size:14px;"> Modification enregistrée avec succès</p>
            </div>
          </div>
        `;
        document.body.appendChild(editSuccessModal);
        editSuccessModal.querySelector('.modal-close').addEventListener('click', function() {
          editSuccessModal.classList.remove('active');
          document.body.removeChild(editSuccessModal);
        });
        window.addEventListener('click', function(e) {
          if (e.target === editSuccessModal) {
            editSuccessModal.classList.remove('active');
            document.body.removeChild(editSuccessModal);
          }
        });
        $('#elevesTable').DataTable().ajax.reload();
      })
      .catch((error) => {
        console.error('❌ Erreur (modification):', error);
        alert("Une erreur est survenue lors de l'envoi du formulaire : " + error.message);
      });
    });
  </script>
  <!-- Ajout du script pour la déconnexion -->
<script>
  document.getElementById('logoutBtn').addEventListener('click', function(e) {
    e.preventDefault();
    if(confirm('Êtes-vous sûr de vouloir vous déconnecter ?')) {
      // Redirection vers la page de connexion
      window.location.href = '../public/index.html'
    }
  });
</script>
  <!-- style du hidden -->
<style>
    .menu-title {
      font-weight: bold;
      color: white;
    }
    .admin-menu li:hover {
      background-color: #f4f6f9;
      color: #b88f1e;
    }
    .form-group.hidden {
      display: none;
    }
  </style>
  <script src="js/fullscreen.js"></script>
</body>
</html>
